meta {
  name: hent registrert system
  type: http
  seq: 1
}

get {
  url: https://platform.tt02.altinn.no/authentication/api/v1/systemregister/vendor/{{systemId}}
  body: none
  auth: none
}

script:pre-request {
  const http = require("axios");
  const tokenrespons = await http.get("https://pengeflyt-token.intern.dev.nav.no/systemregister")
  req.setHeader("Authorization", "Bearer "+ tokenrespons.data);
}

script:post-response {
  const responseBody = res.getBody()
  const clientId = responseBody.clientId[0]
  bru.setVar("clientId", clientId);
}

docs {
  Hent registrert system (f.eks. LiksomSys) fra Altinn sitt systemregister.
  
  Swagger: https://docs.altinn.studio/nb/api/authentication/spec/#/SystemRegister
}
